<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Pi≈°ƒçanƒçja Proizvodnja - Pivka</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #c02425 0%, #f0cb35 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .location-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 20px;
            margin: 10px 0;
        }

        .main-content {
            padding: 30px;
        }

        .weather-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .weather-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .weather-day {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .weather-day.today {
            background: rgba(255,255,255,0.3);
            border: 2px solid white;
        }

        .weather-temp {
            font-size: 1.8em;
            font-weight: bold;
            margin: 10px 0;
        }

        .weather-desc {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .weather-icon {
            font-size: 2em;
            margin: 5px 0;
        }

        .products-section {
            margin-bottom: 30px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .product-card {
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-name {
            font-size: 1.4em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .product-emoji {
            font-size: 3em;
            margin: 10px 0;
        }

        .data-tables {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .table-section {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .table-header {
            background: linear-gradient(135deg, #333 0%, #555 100%);
            color: white;
            padding: 15px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: #f5f5f5;
            padding: 12px;
            text-align: left;
            font-weight: bold;
            border-bottom: 2px solid #ddd;
        }

        .data-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #eee;
        }

        .data-table tr:hover {
            background: #f9f9f9;
        }

        .increase {
            color: #4caf50;
            font-weight: bold;
        }

        .decrease {
            color: #f44336;
            font-weight: bold;
        }

        .ai-reasoning {
            background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .ai-reasoning h3 {
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .reasoning-list {
            list-style: none;
            padding: 0;
        }

        .reasoning-item {
            background: rgba(255,255,255,0.1);
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .reasoning-icon {
            font-size: 1.5em;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            font-size: 1.2em;
            color: #666;
        }

        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .calculate-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s;
            display: block;
            margin: 30px auto;
        }

        .calculate-btn:hover {
            transform: scale(1.05);
        }

        .total-row {
            font-weight: bold;
            background: #f0f0f0;
        }

        .adjustment-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-left: 5px;
            font-weight: bold;
        }

        .adjustment-badge.weather {
            background: #2196f3;
            color: white;
        }

        .adjustment-badge.holiday {
            background: #ff9800;
            color: white;
        }

        .adjustment-badge.trend {
            background: #9c27b0;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üêî AI Pi≈°ƒçanƒçja Proizvodnja</h1>
            <div class="location-badge">üìç Pivka, Slovenija</div>
            <p>Inteligentno naƒçrtovanje proizvodnje s pomoƒçjo AI in vremenskih podatkov</p>
        </div>

        <div class="main-content">
            <!-- Weather Section -->
            <div class="weather-section">
                <h2>üå§Ô∏è Vremenska napoved - Pivka (ta teden)</h2>
                <div id="weatherGrid" class="weather-grid">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <p>Pridobivanje vremenskih podatkov...</p>
                    </div>
                </div>
            </div>

            <!-- Products Section -->
            <div class="products-section">
                <h2 style="text-align: center; margin-bottom: 20px;">üì¶ Na≈°i Produkti</h2>
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-emoji">üçó</div>
                        <div class="product-name">Bedra</div>
                        <div>Premium pi≈°ƒçanƒçja bedra</div>
                    </div>
                    <div class="product-card">
                        <div class="product-emoji">ü•©</div>
                        <div class="product-name">File prsi</div>
                        <div>Sve≈æi pi≈°ƒçanƒçji file</div>
                    </div>
                    <div class="product-card">
                        <div class="product-emoji">üçñ</div>
                        <div class="product-name">Krila</div>
                        <div>Hrustljava pi≈°ƒçanƒçja krila</div>
                    </div>
                    <div class="product-card">
                        <div class="product-emoji">üç¢</div>
                        <div class="product-name">Ra≈ænjiƒçi</div>
                        <div>Pripravljeni ra≈ænjiƒçi</div>
                    </div>
                </div>
            </div>

            <!-- Data Tables -->
            <div class="data-tables">
                <!-- Historical Data -->
                <div class="table-section">
                    <div class="table-header">üìä Zgodovinski podatki (lani ta teden)</div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Produkt</th>
                                <th>Pon</th>
                                <th>Tor</th>
                                <th>Sre</th>
                                <th>ƒået</th>
                                <th>Pet</th>
                                <th>Sob</th>
                                <th>Ned</th>
                                <th>Skupaj</th>
                            </tr>
                        </thead>
                        <tbody id="historicalData">
                            <tr>
                                <td><strong>Bedra</strong></td>
                                <td>850</td>
                                <td>920</td>
                                <td>980</td>
                                <td>1100</td>
                                <td>1350</td>
                                <td>1600</td>
                                <td>1200</td>
                                <td><strong>8000</strong></td>
                            </tr>
                            <tr>
                                <td><strong>File prsi</strong></td>
                                <td>1200</td>
                                <td>1250</td>
                                <td>1300</td>
                                <td>1400</td>
                                <td>1650</td>
                                <td>1900</td>
                                <td>1500</td>
                                <td><strong>10200</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Krila</strong></td>
                                <td>600</td>
                                <td>650</td>
                                <td>700</td>
                                <td>750</td>
                                <td>950</td>
                                <td>1200</td>
                                <td>900</td>
                                <td><strong>5750</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Ra≈ænjiƒçi</strong></td>
                                <td>400</td>
                                <td>420</td>
                                <td>450</td>
                                <td>500</td>
                                <td>650</td>
                                <td>800</td>
                                <td>600</td>
                                <td><strong>3820</strong></td>
                            </tr>
                            <tr class="total-row">
                                <td><strong>SKUPAJ</strong></td>
                                <td>3050</td>
                                <td>3240</td>
                                <td>3430</td>
                                <td>3750</td>
                                <td>4600</td>
                                <td>5500</td>
                                <td>4200</td>
                                <td><strong>27770</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- AI Adjusted Data -->
                <div class="table-section">
                    <div class="table-header">ü§ñ AI Prilagojena napoved (ta teden)</div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Produkt</th>
                                <th>Pon</th>
                                <th>Tor</th>
                                <th>Sre</th>
                                <th>ƒået</th>
                                <th>Pet</th>
                                <th>Sob</th>
                                <th>Ned</th>
                                <th>Skupaj</th>
                            </tr>
                        </thead>
                        <tbody id="aiAdjustedData">
                            <tr>
                                <td colspan="9" style="text-align: center; padding: 40px;">
                                    <button class="calculate-btn" onclick="calculateAIForecast()">
                                        üöÄ Generiraj AI napoved
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- AI Reasoning Section -->
            <div class="ai-reasoning" id="aiReasoning" style="display: none;">
                <h3>üß† AI Razlogi za prilagoditve:</h3>
                <ul class="reasoning-list" id="reasoningList">
                </ul>
            </div>

            <!-- Chart Section -->
            <div class="chart-container" id="chartContainer" style="display: none;">
                <h3 style="text-align: center; margin-bottom: 20px;">üìà Primerjava: Zgodovinski vs AI Napoved</h3>
                <canvas id="comparisonChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const PIVKA_LAT = 45.6839;
        const PIVKA_LON = 14.1945;
        // Note: In production, API keys should be stored securely on the server
        const USE_SIMULATED_DATA = true; // Set to true for demo purposes

        let weatherData = null;
        let comparisonChart = null;

        // Days of week in Slovenian
        const daysOfWeek = ['Ned', 'Pon', 'Tor', 'Sre', 'ƒået', 'Pet', 'Sob'];
        const fullDays = ['Nedelja', 'Ponedeljek', 'Torek', 'Sreda', 'ƒåetrtek', 'Petek', 'Sobota'];

        // Weather icons mapping
        const weatherIcons = {
            'Clear': '‚òÄÔ∏è',
            'Clouds': '‚òÅÔ∏è',
            'Rain': 'üåßÔ∏è',
            'Drizzle': 'üå¶Ô∏è',
            'Thunderstorm': '‚õàÔ∏è',
            'Snow': '‚ùÑÔ∏è',
            'Mist': 'üå´Ô∏è',
            'Fog': 'üå´Ô∏è'
        };

        // Load weather data on page load
        window.addEventListener('load', function() {
            loadWeatherData();
        });

        async function loadWeatherData() {
            if (USE_SIMULATED_DATA) {
                // Simulated weather data for Pivka this week
                weatherData = generateSimulatedWeatherData();
                displayWeather(weatherData);
            } else {
                // In production, this would call a secure backend endpoint
                document.getElementById('weatherGrid').innerHTML =
                    '<p style="color: white;">Weather API configuration needed</p>';
            }
        }

        function generateSimulatedWeatherData() {
            const today = new Date();
            const weatherPatterns = [
                { weather: 'Clear', description: 'jasno', temp: 24, minTemp: 15, maxTemp: 28, rain: 0, windSpeed: 2.5 },
                { weather: 'Clouds', description: 'delno oblaƒçno', temp: 22, minTemp: 14, maxTemp: 26, rain: 0, windSpeed: 3.1 },
                { weather: 'Rain', description: 'rahel de≈æ', temp: 18, minTemp: 12, maxTemp: 21, rain: 3.5, windSpeed: 4.2 },
                { weather: 'Clouds', description: 'oblaƒçno', temp: 19, minTemp: 13, maxTemp: 23, rain: 0, windSpeed: 2.8 },
                { weather: 'Clear', description: 'sonƒçno', temp: 25, minTemp: 16, maxTemp: 29, rain: 0, windSpeed: 2.2 },
                { weather: 'Clear', description: 'jasno', temp: 27, minTemp: 17, maxTemp: 31, rain: 0, windSpeed: 1.9 },
                { weather: 'Clouds', description: 'delno oblaƒçno', temp: 26, minTemp: 16, maxTemp: 30, rain: 0, windSpeed: 2.4 }
            ];

            return weatherPatterns.map((pattern, index) => {
                const date = new Date(today);
                date.setDate(today.getDate() + index);
                return {
                    date: date,
                    ...pattern
                };
            });
        }

        function processWeatherData(data) {
            const dailyData = {};
            const today = new Date();

            // Group forecast data by day
            data.list.forEach(item => {
                const date = new Date(item.dt * 1000);
                const dayKey = date.toDateString();

                if (!dailyData[dayKey]) {
                    dailyData[dayKey] = {
                        date: date,
                        temps: [],
                        weather: item.weather[0].main,
                        description: item.weather[0].description,
                        rain: 0,
                        wind: []
                    };
                }

                dailyData[dayKey].temps.push(item.main.temp);
                dailyData[dayKey].wind.push(item.wind.speed);
                if (item.rain && item.rain['3h']) {
                    dailyData[dayKey].rain += item.rain['3h'];
                }
            });

            // Calculate daily averages
            const processedData = [];
            Object.values(dailyData).slice(0, 7).forEach(day => {
                processedData.push({
                    date: day.date,
                    temp: Math.round(day.temps.reduce((a, b) => a + b) / day.temps.length),
                    minTemp: Math.round(Math.min(...day.temps)),
                    maxTemp: Math.round(Math.max(...day.temps)),
                    weather: day.weather,
                    description: day.description,
                    rain: day.rain.toFixed(1),
                    windSpeed: (day.wind.reduce((a, b) => a + b) / day.wind.length).toFixed(1)
                });
            });

            return processedData;
        }

        function displayWeather(weatherData) {
            const grid = document.getElementById('weatherGrid');
            const today = new Date().toDateString();

            let html = '';
            weatherData.forEach((day, index) => {
                const isToday = day.date.toDateString() === today;
                const dayName = fullDays[day.date.getDay()];
                const icon = weatherIcons[day.weather] || 'üå§Ô∏è';

                html += `
                    <div class="weather-day ${isToday ? 'today' : ''}">
                        <div><strong>${dayName}</strong></div>
                        <div>${day.date.getDate()}.${day.date.getMonth() + 1}.</div>
                        <div class="weather-icon">${icon}</div>
                        <div class="weather-temp">${day.maxTemp}¬∞</div>
                        <div style="font-size: 0.9em;">Min: ${day.minTemp}¬∞</div>
                        <div class="weather-desc">${day.description}</div>
                        ${day.rain > 0 ? `<div>üíß ${day.rain}mm</div>` : ''}
                        <div>üí® ${day.windSpeed}m/s</div>
                    </div>
                `;
            });

            grid.innerHTML = html;
        }

        async function calculateAIForecast() {
            const button = event.target;
            button.disabled = true;
            button.textContent = 'Generiram napoved...';

            // Prepare weather summary for AI
            const weatherSummary = weatherData.map(d => ({
                day: fullDays[d.date.getDay()],
                temp: d.temp,
                weather: d.weather,
                rain: d.rain
            }));

            // Simulate AI reasoning (in production, this would call OpenAI)
            const aiReasonings = generateAIReasoning(weatherSummary);
            const adjustedData = calculateAdjustments(weatherSummary);

            // Display results
            displayAdjustedData(adjustedData);
            displayAIReasoning(aiReasonings);
            displayComparisonChart(adjustedData);

            button.textContent = 'üöÄ Generiraj AI napoved';
            button.disabled = false;
        }

        function generateAIReasoning(weatherSummary) {
            const reasonings = [];

            // Weather-based reasoning
            const rainyDays = weatherSummary.filter(d => parseFloat(d.rain) > 0);
            if (rainyDays.length > 0) {
                reasonings.push({
                    icon: 'üåßÔ∏è',
                    text: `De≈æ napovedan za ${rainyDays.length} dni - priƒçakujem ${rainyDays.length * 3}% manj≈°e povpra≈°evanje za ra≈ænjiƒçe`
                });
            }

            const hotDays = weatherSummary.filter(d => d.temp > 25);
            if (hotDays.length > 0) {
                reasonings.push({
                    icon: '‚òÄÔ∏è',
                    text: `Toplo vreme (${hotDays.length} dni nad 25¬∞C) - poveƒçano povpra≈°evanje za krila (+15%) in ra≈ænjiƒçe (+20%)`
                });
            }

            // Weekend reasoning
            reasonings.push({
                icon: 'üìÖ',
                text: 'Vikend efekt: Sobota +40% in Nedelja +25% poveƒçanje za vse produkte (pikniki in dru≈æinska kosila)'
            });

            // Seasonal trend
            const currentMonth = new Date().getMonth();
            if (currentMonth >= 5 && currentMonth <= 8) {
                reasonings.push({
                    icon: 'üåû',
                    text: 'Poletna sezona: +10% splo≈°no poveƒçanje zaradi piknikov in zunanjih aktivnosti'
                });
            }

            // Product-specific insights
            reasonings.push({
                icon: 'üìä',
                text: 'File prsi ostajajo najbolj priljubljen produkt - stabilno povpra≈°evanje z rahlo rastjo (+5%)'
            });

            // Special events
            const today = new Date();
            const dayOfWeek = today.getDay();
            if (dayOfWeek === 3 || dayOfWeek === 4) {
                reasonings.push({
                    icon: 'üéâ',
                    text: 'Pristopanje vikendu: ƒåetrtek in Petek +15% za pripravo vikend dogodkov'
                });
            }

            return reasonings;
        }

        function calculateAdjustments(weatherSummary) {
            const historicalData = {
                'Bedra': [850, 920, 980, 1100, 1350, 1600, 1200],
                'File prsi': [1200, 1250, 1300, 1400, 1650, 1900, 1500],
                'Krila': [600, 650, 700, 750, 950, 1200, 900],
                'Ra≈ænjiƒçi': [400, 420, 450, 500, 650, 800, 600]
            };

            const adjustedData = {};

            Object.keys(historicalData).forEach(product => {
                adjustedData[product] = [];

                historicalData[product].forEach((baseValue, dayIndex) => {
                    let adjustedValue = baseValue;
                    const weather = weatherSummary[dayIndex];

                    // Weather adjustments
                    if (weather) {
                        if (parseFloat(weather.rain) > 0) {
                            // Rain decreases outdoor products
                            if (product === 'Ra≈ænjiƒçi' || product === 'Krila') {
                                adjustedValue *= 0.9;
                            }
                        }

                        if (weather.temp > 25) {
                            // Hot weather increases demand for grilled items
                            if (product === 'Ra≈ænjiƒçi') {
                                adjustedValue *= 1.2;
                            } else if (product === 'Krila') {
                                adjustedValue *= 1.15;
                            }
                        }

                        if (weather.temp < 10) {
                            // Cold weather increases comfort food
                            if (product === 'Bedra') {
                                adjustedValue *= 1.1;
                            }
                        }
                    }

                    // Day of week adjustments (0=Sunday, 1=Monday, etc.)
                    const actualDay = (dayIndex + 1) % 7; // Adjust for Monday start

                    // Weekend boost
                    if (actualDay === 6) { // Saturday
                        adjustedValue *= 1.4;
                    } else if (actualDay === 0) { // Sunday
                        adjustedValue *= 1.25;
                    } else if (actualDay === 5) { // Friday
                        adjustedValue *= 1.15;
                    }

                    // Product-specific trends
                    if (product === 'File prsi') {
                        adjustedValue *= 1.05; // General growth trend
                    }

                    // Seasonal adjustment (summer)
                    const currentMonth = new Date().getMonth();
                    if (currentMonth >= 5 && currentMonth <= 8) {
                        if (product === 'Ra≈ænjiƒçi' || product === 'Krila') {
                            adjustedValue *= 1.1;
                        }
                    }

                    adjustedData[product].push(Math.round(adjustedValue));
                });
            });

            return adjustedData;
        }

        function displayAdjustedData(adjustedData) {
            const tbody = document.getElementById('aiAdjustedData');
            let html = '';
            let dailyTotals = [0, 0, 0, 0, 0, 0, 0];

            Object.keys(adjustedData).forEach(product => {
                html += '<tr>';
                html += `<td><strong>${product}</strong></td>`;

                let productTotal = 0;
                adjustedData[product].forEach((value, index) => {
                    const historical = getHistoricalValue(product, index);
                    const change = ((value - historical) / historical * 100).toFixed(0);
                    const changeClass = value > historical ? 'increase' : value < historical ? 'decrease' : '';

                    html += `<td>${value}`;
                    if (Math.abs(change) > 5) {
                        html += ` <span class="${changeClass}">(${change > 0 ? '+' : ''}${change}%)</span>`;
                    }
                    html += '</td>';

                    productTotal += value;
                    dailyTotals[index] += value;
                });

                html += `<td><strong>${productTotal}</strong></td>`;
                html += '</tr>';
            });

            // Total row
            html += '<tr class="total-row">';
            html += '<td><strong>SKUPAJ</strong></td>';
            let grandTotal = 0;
            dailyTotals.forEach(total => {
                html += `<td>${total}</td>`;
                grandTotal += total;
            });
            html += `<td><strong>${grandTotal}</strong></td>`;
            html += '</tr>';

            tbody.innerHTML = html;
        }

        function getHistoricalValue(product, dayIndex) {
            const historicalData = {
                'Bedra': [850, 920, 980, 1100, 1350, 1600, 1200],
                'File prsi': [1200, 1250, 1300, 1400, 1650, 1900, 1500],
                'Krila': [600, 650, 700, 750, 950, 1200, 900],
                'Ra≈ænjiƒçi': [400, 420, 450, 500, 650, 800, 600]
            };
            return historicalData[product][dayIndex];
        }

        function displayAIReasoning(reasonings) {
            const section = document.getElementById('aiReasoning');
            const list = document.getElementById('reasoningList');

            let html = '';
            reasonings.forEach(reasoning => {
                html += `
                    <li class="reasoning-item">
                        <span class="reasoning-icon">${reasoning.icon}</span>
                        <span>${reasoning.text}</span>
                    </li>
                `;
            });

            list.innerHTML = html;
            section.style.display = 'block';
        }

        function displayComparisonChart(adjustedData) {
            const container = document.getElementById('chartContainer');
            container.style.display = 'block';

            if (comparisonChart) {
                comparisonChart.destroy();
            }

            const ctx = document.getElementById('comparisonChart').getContext('2d');
            const labels = ['Ponedeljek', 'Torek', 'Sreda', 'ƒåetrtek', 'Petek', 'Sobota', 'Nedelja'];

            const datasets = [];
            const colors = {
                'Bedra': { border: '#ff6384', bg: 'rgba(255, 99, 132, 0.2)' },
                'File prsi': { border: '#36a2eb', bg: 'rgba(54, 162, 235, 0.2)' },
                'Krila': { border: '#ffcd56', bg: 'rgba(255, 205, 86, 0.2)' },
                'Ra≈ænjiƒçi': { border: '#4bc0c0', bg: 'rgba(75, 192, 192, 0.2)' }
            };

            Object.keys(adjustedData).forEach(product => {
                datasets.push({
                    label: product + ' (AI napoved)',
                    data: adjustedData[product],
                    borderColor: colors[product].border,
                    backgroundColor: colors[product].bg,
                    borderWidth: 3,
                    tension: 0.4
                });

                // Add historical data for comparison
                datasets.push({
                    label: product + ' (Lani)',
                    data: getHistoricalData(product),
                    borderColor: colors[product].border,
                    backgroundColor: 'transparent',
                    borderWidth: 1,
                    borderDash: [5, 5],
                    tension: 0.4
                });
            });

            comparisonChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: false
                        },
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Koliƒçina (kg)'
                            }
                        }
                    }
                }
            });
        }

        function getHistoricalData(product) {
            const historicalData = {
                'Bedra': [850, 920, 980, 1100, 1350, 1600, 1200],
                'File prsi': [1200, 1250, 1300, 1400, 1650, 1900, 1500],
                'Krila': [600, 650, 700, 750, 950, 1200, 900],
                'Ra≈ænjiƒçi': [400, 420, 450, 500, 650, 800, 600]
            };
            return historicalData[product];
        }
    </script>
</body>
</html>